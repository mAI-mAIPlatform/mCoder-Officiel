on:
  push:
    branches:
      - main # Ajuste la branche si besoin
  workflow_dispatch:
    inputs:
      job_name:
        description: 'Nom du job'
        type: string
        default: 'Windows Test'
      electron_tests:
        description: 'Run Electron tests'
        type: boolean
        default: true
      browser_tests:
        description: 'Run Browser tests'
        type: boolean
        default: false
      remote_tests:
        description: 'Run Remote tests'
        type: boolean
        default: false
  workflow_call:
    inputs:
      job_name:
        type: string
        required: true
      electron_tests:
        type: boolean
        default: false
      browser_tests:
        type: boolean
        default: false
      remote_tests:
        type: boolean
        default: false

jobs:
  windows-test:
    # On utilise une valeur de secours si inputs.job_name est vide (cas du push)
    name: ${{ inputs.job_name || 'Windows Automated Test' }}
    runs-on: [ self-hosted, 1ES.Pool=1es-vscode-oss-windows-2022-x64 ]
    env:
      # Gestion propre des variables d'environnement mÃªme sans inputs
      ARTIFACT_NAME: ${{ (inputs.electron_tests && 'electron') || (inputs.browser_tests && 'browser') || (inputs.remote_tests && 'remote') || 'electron' }}
      NPM_ARCH: x64
      VSCODE_ARCH: x64
    steps:
      - name: Checkout microsoft/vscode
        uses: actions/checkout@v6
      
      # ... (le reste de tes steps reste identique)
